.avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
}

.avatar--small {
  width: 60px;
  height: 60px;
}

.avatar--medium {
  width: 200px;
  height: 200px;
}

.avatar--large {
  width: 300px;
  height: 300px;
}

.avatar-svg {
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.2));
}

/* Core intelligence */
.avatar-core {
  filter: url(#glow);
  transition: all 0.3s ease;
}

.avatar-core:hover {
  filter: url(#glow) brightness(1.1);
}

/* Core states */
.avatar-core--listening {
  animation: pulse-core 1.5s ease-in-out infinite;
}

.avatar-core--thinking {
  animation: pulse-core 0.8s ease-in-out infinite;
}

.avatar-core--speaking {
  animation: pulse-core 0.5s ease-in-out infinite;
}

/* Orbiting nodes - thinking */
.avatar-node {
  fill: #ec4899;
  animation: pulse 3s ease-in-out infinite;
  transition: all 0.3s ease;
}

.avatar-node--secondary {
  fill: #f472b6;
  opacity: 0.7;
  animation: pulse 2s ease-in-out infinite;
}

.avatar-node:nth-child(1) { animation-delay: 0s; }
.avatar-node:nth-child(2) { animation-delay: 0.5s; }
.avatar-node:nth-child(3) { animation-delay: 1s; }
.avatar-node:nth-child(4) { animation-delay: 1.5s; }

/* Node states */
.avatar-nodes--listening .avatar-node {
  animation-duration: 1s;
}

.avatar-nodes--thinking .avatar-node,
.avatar-nodes--speaking .avatar-node {
  animation-duration: 0.6s;
}

/* Connection paths - communication */
.avatar-connection {
  stroke: #a78bfa;
  stroke-width: 2;
  opacity: 0.6;
  animation: flow 2s ease-in-out infinite;
}

.avatar-connection--secondary {
  stroke: #c4b5fd;
  stroke-width: 1.5;
  opacity: 0.4;
}

.avatar-connection:nth-child(1) { animation-delay: 0s; }
.avatar-connection:nth-child(2) { animation-delay: 0.5s; }
.avatar-connection:nth-child(3) { animation-delay: 1s; }
.avatar-connection:nth-child(4) { animation-delay: 1.5s; }

/* Connection states */
.avatar-connections--listening .avatar-connection {
  animation-duration: 1s;
  opacity: 0.8;
}

.avatar-connections--thinking .avatar-connection,
.avatar-connections--speaking .avatar-connection {
  animation-duration: 0.5s;
  opacity: 1;
}

/* Outer boundary */
.avatar-boundary {
  stroke: #d8b4fe;
  stroke-width: 1.5;
  opacity: 0.4;
  animation: breathe 4s ease-in-out infinite;
}

/* Boundary states */
.avatar-boundary--listening {
  animation: breathe 2s ease-in-out infinite;
  opacity: 0.6;
  stroke: #a78bfa;
}

.avatar-boundary--thinking {
  animation: breathe 1s ease-in-out infinite;
  opacity: 0.8;
  stroke: #8b5cf6;
}

.avatar-boundary--speaking {
  animation: breathe 0.8s ease-in-out infinite;
  opacity: 1;
  stroke: #7c3aed;
}

/* Ripple effect for listening */
.avatar-ripple {
  stroke: #6366f1;
  stroke-width: 2;
  opacity: 0;
  animation: ripple 2s ease-out infinite;
}

.avatar-ripple--delayed {
  animation-delay: 0.5s;
}

/* Animations */
@keyframes pulse {
  0%, 100% {
    r: 12;
    opacity: 1;
  }
  50% {
    r: 14;
    opacity: 0.7;
  }
}

@keyframes pulse-core {
  0%, 100% {
    r: 40;
    opacity: 1;
  }
  50% {
    r: 44;
    opacity: 0.9;
  }
}

@keyframes flow {
  0%, 100% {
    stroke-dasharray: 0, 100;
    opacity: 0.4;
  }
  50% {
    stroke-dasharray: 50, 50;
    opacity: 0.8;
  }
}

@keyframes breathe {
  0%, 100% {
    r: 80;
    opacity: 0.3;
  }
  50% {
    r: 82;
    opacity: 0.5;
  }
}

@keyframes ripple {
  0% {
    r: 45;
    opacity: 0.8;
    stroke-width: 3;
  }
  100% {
    r: 75;
    opacity: 0;
    stroke-width: 0;
  }
}

/* Small avatar adjustments */
.avatar--small .avatar-core {
  r: 20;
}

.avatar--small .avatar-node {
  r: 6;
}

.avatar--small .avatar-boundary {
  r: 40;
}

/* Large avatar adjustments */
.avatar--large .avatar-core {
  r: 60;
}

.avatar--large .avatar-node {
  r: 16;
}

.avatar--large .avatar-boundary {
  r: 120;
}
